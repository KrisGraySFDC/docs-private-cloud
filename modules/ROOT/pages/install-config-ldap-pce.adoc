= Configure an External Identity Provider in Anypoint Private Cloud - WIP
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]

Anypoint Platform Private Cloud Edition requires an External Identity Provider. To configure third-party access for each of the available options, the following providers are supported:

* LDAP
* xref:access-management::conf-client-mgmt-pf-task.adoc[Configure Ping Federate]???
* xref:access-management::managing-users.adoc[Configure SAML]
* xref:access-management::conf-client-mgmt-openam-task.adoc[OpenAM]???
* OpenID Connect

In the current version of Private Cloud Edition, all users must be registered via external identity, except the admin you register in the installation wizard.

== LDAP Version 3

. From Anypoint Platform, select *Access Management* > *External Identity* > *Identity Management*.
. Select LDAP.
. Enter the connection settings for your LDAP service:
+
[%header%autowidth.spread]
|===
| Property | Description
| Host | The host name of your LDAP server. If you are using TLS in your ldap server, use `ldaps://mulesoft.com`. If you are not using TLS, use this host name: `ldap://mulesoft.com`
| Port | The port used to communicate with your LDAP server. The default ldap port is `389`. The default ldaps port is `636`.
| Validate server certificate | Uncheck this option if you are using a self-signed certificate.
| Bind DN | The distinguished names for the user making the LDAP queries. For example, `uid=admin,ou=people,dc=mulesoft,dc=com`.
| Password | The password for the LDAP server. For example,`examplepassphrase`.
| Connection Timeout | The timeout frame (in seconds) for a connection. For example, `10`.
| Operation Timeout | The timeout frame (in milliseconds) for an operation. For example, `30000`.
|===

. Define the search bases:
+
[%header%autowidth.spread]
|===
| Property | Description
| User | The base level for your user search base object. For example, `uid=admin,dc=mulesoft,dc=com`.
| Group | The base level for your groups search base object. For example, `ou=groups,dc=mulesoft,dc=com`.
|===

. Specify the search filters
+
[%header%autowidth.spread]
|===
| Property | Description
| Find User by Username | The search filter to find users by user name. For example, `(&(objectClass=inetOrgPerson)(uid={{username}}))`.
| Find User's Groups by Username | The search filter to find user groups by user name. For example, `(&(objectClass=GroupOfNames)(member=uid={{username}},ou=people,dc=mulesoft,dc=com))`.
|===

. Specify the user field mappings
+
[%header%autowidth.spread]
|===
| Property | Description
| Username | Field that represents the user name. For example, `uid`.
| Email | Field that represents the email. For example, `mail`.
| First Name | Field that represents the first name. For example, `givenName`.
| Last Name | Field that represents the last name. For example, `sn`.
| ID | Id for your user. For example, `uid`.
|===

. Map the group field mappings
+
[%header%autowidth.spread]
|===
| Property | Description
| Group Name | Field that represents your Group name. This value is used for Role Group Mapping. For example,`cn`.
| ID | Field that represents your groups Id. For example, `dn`.
|===

. Click Test Connection
. Enter the user name and password of a user that exists in your LDAP server.
. Click Test
+
If Access Management returns `OK` for each item, your LDAP server is configured correctly.

. Save the configuration.

== OpenID Connect
Refer to xref:access-management/conf-openid-connect-task.adoc[To Configure OpenID Connect] for detailed configuration information.

Troubleshooting information can be found at https://help.mulesoft.com/s/article/Anypoint-Platform-Single-Sign-On-SSO-using-OpenID-Connect-OIDC-Troubleshooting-Guide[Anypoint Platform Single Sign-On (SSO) using OpenID Connect (OIDC) Troubleshooting Guide].

== SAML 2.0

. From Anypoint Platform, select *Access Management* > *External Identity* > *Identity Management*.
. Select SAML 2.0.
+
* *Sign On URL*
* *Sign Off URL*
* *Issuer*
* *Public Key*
* *Audience*
+
. Select Save.

// Do we need to discuss automatic Group assignment - e.g. https://saml-doc.okta.com/SAML_Docs/How-to-Configure-SAML-2.0-for-MuleSoft.html?
